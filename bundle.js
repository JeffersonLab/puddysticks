var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function i(e){return e()}function o(){return Object.create(null)}function c(e){e.forEach(i)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function a(e,t,n){e.$$.on_destroy.push(l(t,n))}function d(e,t,n){if(e){const i=u(e,t,n);return e[0](i)}}function u(e,t,i){return e[1]?n({},n(t.$$scope.ctx,e[1](i?i(t):{}))):t.$$scope.ctx}function f(e,t,i,o){return e[1]?n({},n(t.$$scope.changed||{},e[1](o?o(i):{}))):t.$$scope.changed||{}}const p="undefined"!=typeof window;let g=p?()=>window.performance.now():()=>Date.now(),m=p?e=>requestAnimationFrame(e):e;const $=new Set;let v,h=!1;function b(){$.forEach(e=>{e[0](g())||($.delete(e),e[1]())}),(h=$.size>0)&&m(b)}function y(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode.removeChild(e)}function k(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function C(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(e){return document.createTextNode(e)}function M(){return E(" ")}function O(){return E("")}function S(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function N(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function P(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t){(null!=t||e.value)&&(e.value=t)}function L(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function D(e,t){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t)return void(i.selected=!0)}}function j(e,t,n){e.classList[n?"add":"remove"](t)}function I(e){v=e}function T(){if(!v)throw new Error("Function called outside component initialization");return v}function A(e){T().$$.on_mount.push(e)}function R(){const e=v;return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);i.slice().forEach(t=>{t.call(e,o)})}}}function F(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const q=[],B=[],U=[],V=[],W=Promise.resolve();let H=!1;function J(e){U.push(e)}function G(e){V.push(e)}function X(){const e=new Set;do{for(;q.length;){const e=q.shift();I(e),Y(e.$$)}for(;B.length;)B.pop()();for(let t=0;t<U.length;t+=1){const n=U[t];e.has(n)||(n(),e.add(n))}U.length=0}while(q.length);for(;V.length;)V.pop()();H=!1}function Y(e){e.fragment&&(e.update(e.dirty),c(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(J))}const K=new Set;let Q;function Z(){Q={r:0,c:[],p:Q}}function ee(){Q.r||c(Q.c),Q=Q.p}function te(e,t){e&&e.i&&(K.delete(e),e.i(t))}function ne(e,t,n,i){if(e&&e.o){if(K.has(e))return;K.add(e),Q.c.push(()=>{K.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}function ie(e,t){const i=t.token={};function o(e,o,c,r){if(t.token!==i)return;t.resolved=c&&{[c]:r};const s=n(n({},t.ctx),t.resolved),l=e&&(t.current=e)(s);t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==o&&e&&(Z(),ne(e,1,1,()=>{t.blocks[n]=null}),ee())}):t.block.d(1),l.c(),te(l,1),l.m(t.mount(),t.anchor),X()),t.block=l,t.blocks&&(t.blocks[o]=l)}if((c=e)&&"object"==typeof c&&"function"==typeof c.then){const n=T();if(e.then(e=>{I(n),o(t.then,1,t.value,e),I(null)},e=>{I(n),o(t.catch,2,t.error,e),I(null)}),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved={[t.value]:e}}var c}const oe="undefined"!=typeof window?window:global;function ce(e,t){ne(e,1,1,()=>{t.delete(e.key)})}function re(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function se(e,t,n){const{fragment:o,on_mount:s,on_destroy:l,after_update:a}=e.$$;o.m(t,n),J(()=>{const t=s.map(i).filter(r);l?l.push(...t):c(t),e.$$.on_mount=[]}),a.forEach(J)}function le(e,t){e.$$.fragment&&(c(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function ae(e,t){e.$$.dirty||(q.push(e),H||(H=!0,W.then(X)),e.$$.dirty=o()),e.$$.dirty[t]=!0}function de(t,n,i,r,s,l){const a=v;I(t);const d=n.props||{},u=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:null};let f=!1;u.ctx=i?i(t,d,(e,n)=>{u.ctx&&s(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),f&&ae(t,e))}):d,u.update(),f=!0,c(u.before_update),u.fragment=r(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):u.fragment.c(),n.intro&&te(t.$$.fragment),se(t,n.target,n.anchor),X()),I(a)}class ue{$destroy(){le(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const fe=[];function pe(t,n=e){let i;const o=[];function c(e){if(s(t,e)&&(t=e,i)){const e=!fe.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),fe.push(n,t)}if(e){for(let e=0;e<fe.length;e+=2)fe[e][0](fe[e+1]);fe.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(r,s=e){const l=[r,s];return o.push(l),1===o.length&&(i=n(c)||e),r(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(i(),i=null)}}}}const ge=function(){const{subscribe:e,set:t,update:n}=pe({});return{subscribe:e,set:t,update:n,addChild:(e,t)=>{be(e,t),e.items=e.items||[],e.items.push(t),n(e=>e)},remove:e=>{if(e.par){let t=e.par.items.findIndex(function(t){return t.id==e.id});delete $e[e.id],delete ve[e.id],e.par.items.splice(t,1),n(e=>e)}},up:e=>{if(e.par){let t=e.par.items.findIndex(function(t){return t.id==e.id});t>0&&(e.par.items[t]=e.par.items[t-1],e.par.items[t-1]=e),n(e=>e)}},down:e=>{if(e.par){let t=e.par.items.findIndex(function(t){return t.id==e.id});t<e.par.items.length-1&&(e.par.items[t]=e.par.items[t+1],e.par.items[t+1]=e),n(e=>e)}}}}(),me={},$e={},ve={};let he=0;function be(e,t){if("Display"===t.name){let e={title:"",style:"",theme:"",items:[]};Object.keys(e).forEach(n=>{n in t||(t[n]=e[n])}),Object.keys(t).forEach(n=>{"name"===n||n in e||delete t[n]})}else if(me[t.name]){let e=me[t.name].defaults;Object.keys(e).forEach(n=>{n in t||(t[n]=e[n])}),Object.keys(t).forEach(n=>{"name"===n||n in e||delete t[n]})}if(t.dataprovider){let e=me[t.name].dataproviders[t.dataprovider.name].defaults;t.dataprovider={...e,...t.dataprovider}}t.id="puddy-"+he++,t.par=e,$e[t.id]=t,ve[t.id]=pe(t)}function ye(e){var t,n,i;function o(n){e.switch_instance_config_binding_1.call(null,n),t=!0,G(()=>t=!1)}var c=me[e.$properties.name].constructor;function r(e){let t={};return void 0!==e.$properties&&(t.config=e.$properties),{props:t}}if(c){var s=new c(r(e));B.push(()=>re(s,"config",o))}return{c(){s&&s.$$.fragment.c(),n=O()},m(e,t){s&&se(s,e,t),w(e,n,t),i=!0},p(e,i){var l={};if(!t&&e.$properties&&(l.config=i.$properties),c!==(c=me[i.$properties.name].constructor)){if(s){Z();const e=s;ne(e.$$.fragment,1,0,()=>{le(e,1)}),ee()}c?(s=new c(r(i)),B.push(()=>re(s,"config",o)),s.$$.fragment.c(),te(s.$$.fragment,1),se(s,n.parentNode,n)):s=null}else c&&s.$set(l)},i(e){i||(s&&te(s.$$.fragment,e),i=!0)},o(e){s&&ne(s.$$.fragment,e),i=!1},d(e){e&&x(n),s&&le(s,e)}}}function we(e){var t,n,i;function o(n){e.switch_instance_config_binding.call(null,n),t=!0,G(()=>t=!1)}var c=me[e.$properties.name].dataproviders[e.$properties.dataprovider.name].constructor;function r(e){let t={};return void 0!==e.$properties&&(t.config=e.$properties),{props:t}}if(c){var s=new c(r(e));B.push(()=>re(s,"config",o))}return{c(){s&&s.$$.fragment.c(),n=O()},m(e,t){s&&se(s,e,t),w(e,n,t),i=!0},p(e,i){var l={};if(!t&&e.$properties&&(l.config=i.$properties),c!==(c=me[i.$properties.name].dataproviders[i.$properties.dataprovider.name].constructor)){if(s){Z();const e=s;ne(e.$$.fragment,1,0,()=>{le(e,1)}),ee()}c?(s=new c(r(i)),B.push(()=>re(s,"config",o)),s.$$.fragment.c(),te(s.$$.fragment,1),se(s,n.parentNode,n)):s=null}else c&&s.$set(l)},i(e){i||(s&&te(s.$$.fragment,e),i=!0)},o(e){s&&ne(s.$$.fragment,e),i=!1},d(e){e&&x(n),s&&le(s,e)}}}function xe(e){var t,n,i,o,c=[we,ye],r=[];function s(e,t){return t.$properties.dataprovider?0:1}return t=s(0,e),n=r[t]=c[t](e),{c(){n.c(),i=O()},m(e,n){r[t].m(e,n),w(e,i,n),o=!0},p(e,o){var l=t;(t=s(0,o))===l?r[t].p(e,o):(Z(),ne(r[l],1,1,()=>{r[l]=null}),ee(),(n=r[t])||(n=r[t]=c[t](o)).c(),te(n,1),n.m(i.parentNode,i))},i(e){o||(te(n),o=!0)},o(e){ne(n),o=!1},d(e){r[t].d(e),e&&x(i)}}}function ke(t,n,i){let o,c=e;t.$$.on_destroy.push(()=>c());let r,{item:s}=n;return t.$set=e=>{"item"in e&&i("item",s=e.item)},t.$$.update=(e={item:1})=>{e.item&&(r=ve[s.id],c(),c=l(r,e=>{i("$properties",o=e)}),i("properties",r))},{item:s,properties:r,$properties:o,switch_instance_config_binding:function(e){o=e,r.set(o)},switch_instance_config_binding_1:function(e){o=e,r.set(o)}}}class _e extends ue{constructor(e){super(),de(this,e,ke,xe,s,["item"])}get item(){return this.$$.ctx.item}set item(e){this.$set({item:e}),X()}}function Ce(e,t,n){const i=Object.create(e);return i.item=t[n],i}function Ee(e){for(var t,n,i=e.items,o=[],c=0;c<i.length;c+=1)o[c]=Me(Ce(e,i,c));const r=e=>ne(o[e],1,1,()=>{o[e]=null});return{c(){for(var e=0;e<o.length;e+=1)o[e].c();t=O()},m(e,i){for(var c=0;c<o.length;c+=1)o[c].m(e,i);w(e,t,i),n=!0},p(e,n){if(e.items){i=n.items;for(var c=0;c<i.length;c+=1){const r=Ce(n,i,c);o[c]?(o[c].p(e,r),te(o[c],1)):(o[c]=Me(r),o[c].c(),te(o[c],1),o[c].m(t.parentNode,t))}for(Z(),c=i.length;c<o.length;c+=1)r(c);ee()}},i(e){if(!n){for(var t=0;t<i.length;t+=1)te(o[t]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ne(o[e]);n=!1},d(e){k(o,e),e&&x(t)}}}function Me(e){var t,n=new _e({props:{item:e.item}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.items&&(i.item=t.item),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function Oe(e){var t,n,i=e.items&&Ee(e);return{c(){i&&i.c(),t=O()},m(e,o){i&&i.m(e,o),w(e,t,o),n=!0},p(e,n){n.items?i?(i.p(e,n),te(i,1)):((i=Ee(n)).c(),te(i,1),i.m(t.parentNode,t)):i&&(Z(),ne(i,1,1,()=>{i=null}),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){i&&i.d(e),e&&x(t)}}}function Se(e,t,n){let{items:i}=t;return e.$set=e=>{"items"in e&&n("items",i=e.items)},{items:i}}class Ne extends ue{constructor(e){super(),de(this,e,Se,Oe,s,["items"])}get items(){return this.$$.ctx.items}set items(e){this.$set({items:e}),X()}}function Pe(e){var t,n,i,o;const c=e.$$slots.default,r=d(c,e,null);var s=new Ne({props:{items:e.config.items}});return{c(){t=_("div"),r||s.$$.fragment.c(),r&&r.c(),N(t,"class",n="panel "+e.config.class),N(t,"style",i=e.config.style)},l(e){r&&r.l(div_nodes)},m(e,n){w(e,t,n),r?r.m(t,null):se(s,t,null),o=!0},p(e,l){if(!r){var a={};e.config&&(a.items=l.config.items),s.$set(a)}r&&r.p&&e.$$scope&&r.p(f(c,l,e,null),u(c,l,null)),o&&!e.config||n===(n="panel "+l.config.class)||N(t,"class",n),o&&!e.config||i===(i=l.config.style)||N(t,"style",i)},i(e){o||(te(s.$$.fragment,e),te(r,e),o=!0)},o(e){ne(s.$$.fragment,e),ne(r,e),o=!1},d(e){e&&x(t),r||le(s),r&&r.d(e)}}}function ze(e,t,n){let{config:i}=t,{$$slots:o={},$$scope:c}=t;return e.$set=e=>{"config"in e&&n("config",i=e.config),"$$scope"in e&&n("$$scope",c=e.$$scope)},{config:i,$$slots:o,$$scope:c}}class Le extends ue{constructor(e){super(),de(this,e,ze,Pe,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function De(t){var n,i,o;return{c(){N(n=_("div"),"class",i="indicator "+t.config.class+" svelte-bwjdim"),N(n,"style",o=t.config.style),j(n,"flash",t.flash),j(n,"on",t.onIf?t.onIf(t.data):{})},m(e,t){w(e,n,t)},p(e,t){e.config&&i!==(i="indicator "+t.config.class+" svelte-bwjdim")&&N(n,"class",i),e.config&&o!==(o=t.config.style)&&N(n,"style",o),(e.config||e.flash)&&j(n,"flash",t.flash),(e.config||e.onIf||e.data)&&j(n,"on",t.onIf?t.onIf(t.data):{})},i:e,o:e,d(e){e&&x(n)}}}function je(e,t,n){let{config:i,data:o={value:0}}=t,c=!1,r=function(e){return!1};return e.$set=e=>{"config"in e&&n("config",i=e.config),"data"in e&&n("data",o=e.data)},e.$$.update=(e={config:1})=>{if(e.config)if(n("flash",c=!0===i.flash||"true"===i.flash),"function"==typeof i.onIf)n("onIf",r=i.onIf);else if("string"==typeof i.onIf)try{n("onIf",r=Function('"use strict";return ('+i.onIf+")")())}catch(e){}else n("onIf",r=function(e){return!1})},{config:i,data:o,flash:c,onIf:r}}class Ie extends ue{constructor(e){super(),de(this,e,je,De,s,["config","data"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}get data(){return this.$$.ctx.data}set data(e){this.$set({data:e}),X()}}function Te(e){var t,n;function i(n){e.indicator_config_binding.call(null,n),t=!0,G(()=>t=!1)}let o={data:e.data};void 0!==e.config&&(o.config=e.config);var c=new Ie({props:o});return B.push(()=>re(c,"config",i)),{c(){c.$$.fragment.c()},m(e,t){se(c,e,t),n=!0},p(e,n){var i={};e.data&&(i.data=n.data),!t&&e.config&&(i.config=n.config),c.$set(i)},i(e){n||(te(c.$$.fragment,e),n=!0)},o(e){ne(c.$$.fragment,e),n=!1},d(e){le(c,e)}}}function Ae(e,t,n){let i,{config:o={}}=t;return e.$set=e=>{"config"in e&&n("config",o=e.config)},e.$$.update=(e={config:1})=>{e.config&&n("data",i={value:o.dataprovider.value})},{config:o,data:i,indicator_config_binding:function(e){n("config",o=e)}}}class Re extends ue{constructor(e){super(),de(this,e,Ae,Te,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function Fe(e){const t=e-1;return t*t*t+1}function qe(e){return"[object Date]"===Object.prototype.toString.call(e)}function Be(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((t,n)=>Be(e[n],t));return e=>n.map(t=>t(e))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(qe(e)&&qe(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),i={};return n.forEach(n=>{i[n]=Be(e[n],t[n])}),e=>{const t={};return n.forEach(n=>{t[n]=i[n](e)}),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function Ue(e,i={}){const o=pe(e);let c,r=e;function s(s,l){r=s;let a=c,d=!1,{delay:u=0,duration:f=400,easing:p=t,interpolate:v=Be}=n(n({},i),l);const y=g()+u;let w;return(c=function(e){let t;return h||(h=!0,m(b)),{promise:new Promise(n=>{$.add(t=[e,n])}),abort(){$.delete(t)}}}(t=>{if(t<y)return!0;d||(w=v(e,s),"function"==typeof f&&(f=f(e,s)),d=!0),a&&(a.abort(),a=null);const n=t-y;return n>f?(o.set(e=s),!1):(o.set(e=w(p(n/f))),!0)})).promise}return{set:s,update:(t,n)=>s(t(r,e),n),subscribe:o.subscribe}}function Ve(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function We(t,n,i){let o,c=e;t.$$.on_destroy.push(()=>c());let r={min:0,max:100,hz:1,intVal:!1,intMaxInc:!1,tween:!1},{config:s=r}=n;const a=R();let d,u,f,p=s.intMaxInc?1:0;return s.intVal&&(s.min=Math.ceil(s.min),i("config",s),i("defaultConfig",r),s.max=Math.floor(s.max),i("config",s),i("defaultConfig",r)),A(()=>{const e=setInterval(()=>{s.intVal?i("next",u=Math.floor(Math.random()*(s.max-s.min+p)+s.min)):i("next",u=Math.random()*(s.max-s.min)+s.min)},1e3*s.hz);return()=>{clearInterval(e)}}),t.$set=e=>{"config"in e&&i("config",s=e.config)},t.$$.update=(e={defaultConfig:1,config:1,next:1,tweener:1,$tweener:1,value:1})=>{(e.defaultConfig||e.config)&&(i("config",s={...r,...s}),s.min=1*s.min,i("config",s),i("defaultConfig",r),s.max=1*s.max,i("config",s),i("defaultConfig",r),s.hz=1*s.hz,i("config",s),i("defaultConfig",r),s.tween=!0===s.tween||"true"===s.tween,i("config",s),i("defaultConfig",r)),e.config&&(f=Ue(0,{duration:1e3*s.hz,easing:Fe}),c(),c=l(f,e=>{i("$tweener",o=e)}),i("tweener",f)),(e.config||e.next||e.tweener||e.$tweener||e.value)&&(s.tween&&!isNaN(u)?(f.set(u),i("value",d=o)):i("value",d=u),a("value",{value:d}))},{config:s,tweener:f}}class He extends ue{constructor(e){super(),de(this,e,We,Ve,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function Je(e){var t,n,i,o=new He({props:{config:e.config.dataprovider}});function c(t){e.indicator_config_binding.call(null,t),n=!0,G(()=>n=!1)}o.$on("value",e.update);let r={data:e.data};void 0!==e.config&&(r.config=e.config);var s=new Ie({props:r});return B.push(()=>re(s,"config",c)),{c(){o.$$.fragment.c(),t=M(),s.$$.fragment.c()},m(e,n){se(o,e,n),w(e,t,n),se(s,e,n),i=!0},p(e,t){var i={};e.config&&(i.config=t.config.dataprovider),o.$set(i);var c={};e.data&&(c.data=t.data),!n&&e.config&&(c.config=t.config),s.$set(c)},i(e){i||(te(o.$$.fragment,e),te(s.$$.fragment,e),i=!0)},o(e){ne(o.$$.fragment,e),ne(s.$$.fragment,e),i=!1},d(e){le(o,e),e&&x(t),le(s,e)}}}function Ge(e,t,n){let i,{config:o}=t;return e.$set=e=>{"config"in e&&n("config",o=e.config)},{config:o,data:i,update:function(e){n("data",i={value:e.detail.value})},indicator_config_binding:function(e){n("config",o=e)}}}class Xe extends ue{constructor(e){super(),de(this,e,Ge,Je,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}let Ye={epics2web:{}};Ye.contextPrefix=Ye.contextPrefix||"",Ye.epics2web.ClientConnection=function(e){var t="ws:";"https:"===window.location.protocol&&(t="wss:");var n={url:t+"//"+window.location.host+Ye.contextPrefix+"/epics2web/monitor",autoOpen:!0,autoReconnect:!0,autoLivenessPingAndTimeout:!0,autoDisplayClasses:!0,pingIntervalMillis:3e3,livenessTimoutMillis:2e3,reconnectWaitMillis:1e3,chunkedRequestPvsCount:400,clientName:window.location.href};for(var i in e||(e={}),n)void 0!==e[i]?this[i]=e[i]:this[i]=n[i];var o=null,c=document.createElement("div"),r=null,s=this,l=null,a=!1;c.addEventListener("open",function(e){s.onopen(e)}),c.addEventListener("close",function(e){s.onclose(e)}),c.addEventListener("connecting",function(e){s.onconnecting(e)}),c.addEventListener("closing",function(e){s.onclosing(e)}),c.addEventListener("error",function(e){s.onerror(e)}),c.addEventListener("message",function(e){s.onmessage(e)}),c.addEventListener("info",function(e){s.oninfo(e)}),c.addEventListener("update",function(e){s.onupdate(e)}),c.addEventListener("pong",function(e){s.onpong(e)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(){if(null!==o&&o.readyState!==WebSocket.CLOSED)return console.log("already connected"),1;{var e=new CustomEvent("connecting");c.dispatchEvent(e);let t=this.url;null!==this.clientName&&(t=t+"?clientName="+encodeURIComponent(this.clientName)),(o=new WebSocket(t)).onerror=function(e){console.log("server connection error"),console.log(e);e=new CustomEvent("error");c.dispatchEvent(e)},o.onclose=function(e){console.log("server connection closed"),console.log(e.reason);e=new CustomEvent("close");c.dispatchEvent(e),null!==l&&(clearTimeout(l),l=null);var t=null===o||o.readyState===WebSocket.CLOSED;s.autoReconnect&&!a&&t&&(a=!0,setTimeout(function(){s.open(),a=!1},s.reconnectWaitMillis))},o.onmessage=function(e){null!==l&&(clearTimeout(l),l=null),r=new Date;var t=JSON.parse(e.data);if(t.date=r,"update"===t.type){e=new CustomEvent("update",{detail:t});c.dispatchEvent(e)}else if("info"===t.type){e=new CustomEvent("info",{detail:t});c.dispatchEvent(e)}else if("pong"===t.type){e=new CustomEvent("pong");c.dispatchEvent(e)}e=new CustomEvent("message");c.dispatchEvent(e,{detail:t})},o.onopen=function(e){r=new Date;e=new CustomEvent("open");c.dispatchEvent(e)}}},this.close=function(e,t){console.log("close"),null!==o&&o.readyState!==WebSocket.CLOSED?(void 0===e&&(e=1e3),o.close(e,t)):console.log("already closed")},this.monitorPvs=function(e){var t,n,i;if(s.chunkedRequestPvsCount>0)for(t=0,n=e.length;t<n;t+=s.chunkedRequestPvsCount)i=e.slice(t,t+s.chunkedRequestPvsCount),this.monitorPvsChunk(i);else this.monitorPvsChunk(e)},this.monitorPvsChunk=function(e){var t={type:"monitor",pvs:e};o.send(JSON.stringify(t))},this.clearPvs=function(e){var t,n,i;if(s.chunkedRequestPvsCount>0)for(t=0,n=e.length;t<n;t+=s.chunkedRequestPvsCount)i=e.slice(t,t+s.chunkedRequestPvsCount),this.clearPvsChunk(i);else this.clearPvsChunk(e)},this.clearPvsChunk=function(e){var t={type:"clear",pvs:e};o.send(JSON.stringify(t))},this.ping=function(){o.send(JSON.stringify({type:"ping"}))},!0===this.autoOpen&&this.open(),!0===this.autoLivenessPingAndTimeout&&window.setInterval(function(){null!==o&&o.readyState===WebSocket.OPEN&&(s.ping(),null!==l||(l=setTimeout(function(){o.readyState===WebSocket.OPEN&&o.close(),l=null},s.livenessTimoutMillis)))},this.pingIntervalMillis)},Ye.epics2web.ClientConnection.prototype.onopen=function(){},Ye.epics2web.ClientConnection.prototype.onclose=function(){},Ye.epics2web.ClientConnection.prototype.onconnecting=function(){},Ye.epics2web.ClientConnection.prototype.onclosing=function(){},Ye.epics2web.ClientConnection.prototype.onmessage=function(){},Ye.epics2web.ClientConnection.prototype.onerror=function(){},Ye.epics2web.ClientConnection.prototype.onupdate=function(){},Ye.epics2web.ClientConnection.prototype.oninfo=function(){},Ye.epics2web.ClientConnection.prototype.onpong=function(){},Ye.epics2web.isNumericEpicsType=function(e){var t;switch(e){case"DBR_DOUBLE":case"DBR_FLOAT":case"DBR_INT":case"DBR_SHORT":case"DBR_BYTE":t=!0;break;default:t=!1}return t},Ye.epics2web.puddy=Ye.epics2web.puddy||{};let Ke="ws://";"https:"===window.location.protocol&&(Ke="wss://");let Qe="epicsweb.jlab.org";"undefined"===Qe&&(Qe=window.location.hostname);let Ze=Ke+Qe+"/epics2web/monitor";function et(t){var n,i,o,c;return{c(){n=_("span"),i=E(t.formattedValue),N(n,"class",o="label "+t.config.class),N(n,"style",c=t.config.style)},m(e,t){w(e,n,t),y(n,i)},p(e,t){e.formattedValue&&P(i,t.formattedValue),e.config&&o!==(o="label "+t.config.class)&&N(n,"class",o),e.config&&c!==(c=t.config.style)&&N(n,"style",c)},i:e,o:e,d(e){e&&x(n)}}}function tt(e,t,n){let{config:i,data:o={value:0}}=t,c="";return e.$set=e=>{"config"in e&&n("config",i=e.config),"data"in e&&n("data",o=e.data)},e.$$.update=(e={config:1,data:1})=>{(e.config||e.data)&&(i.dataprovider&&i.dataprovider.decimals&&o.value&&o.value.toFixed?n("formattedValue",c=o.value.toFixed(i.dataprovider.decimals)):n("formattedValue",c=o.value))},{config:i,data:o,formattedValue:c}}Ye.epics2web.puddy.con=null,Ye.epics2web.puddy.options={url:Ze},Ye.epics2web.puddy.pvToListenerMap={},Ye.epics2web.puddy.MAX_MONITORS=100,Ye.epics2web.puddy.enumLabelMap={},Ye.epics2web.puddy.monitoredPvs=[],Ye.epics2web.puddy.listenerId=0,Ye.epics2web.puddy.addListener=function(e,t){if(null===Ye.epics2web.puddy.con)return void alert("Not connected");let n=Ye.epics2web.puddy.listenerId++;return Ye.epics2web.puddy.pvToListenerMap[e]=Ye.epics2web.puddy.pvToListenerMap[e]||[],Ye.epics2web.puddy.pvToListenerMap[e].push({id:n,callback:t}),-1===Ye.epics2web.puddy.monitoredPvs.indexOf(e)&&(Ye.epics2web.puddy.monitoredPvs.push(e),Ye.epics2web.puddy.con.monitorPvs([e])),n},Ye.epics2web.puddy.removeListener=function(e,t){let n=Ye.epics2web.puddy.pvToListenerMap[e];if(void 0!==n){let i=n.findIndex(e=>e.id===t);i>-1&&(n.splice(i,1),0===n.length&&(i=Ye.epics2web.puddy.monitoredPvs.indexOf(e))>-1&&(Ye.epics2web.puddy.monitoredPvs.splice(i,1),Ye.epics2web.puddy.con.clearPvs([e])))}},Ye.epics2web.puddy.con={},Ye.epics2web.puddy.con.onopen=function(e){Ye.epics2web.puddy.monitoredPvs.length>0&&Ye.epics2web.puddy.con.monitorPvs(Ye.epics2web.puddy.monitoredPvs)},Ye.epics2web.puddy.con.onclose=function(e){},Ye.epics2web.puddy.con.onupdate=function(e){let t=Ye.epics2web.puddy.pvToListenerMap[e.detail.pv];void 0!==t?t.forEach(function(t){t.callback(e.detail)}):console.log("Server is updating me on a PV I am unaware of: "+e.detail.pv)},Ye.epics2web.puddy.con.oninfo=function(e){let t=Ye.epics2web.puddy.pvToListenerMap[e.detail.pv];void 0!==t?t.forEach(function(t){t.callback(e.detail)}):console.log("Server is providing me with metadata on a PV I am unaware of: "+e.detail.pv)};class nt extends ue{constructor(e){super(),de(this,e,tt,et,s,["config","data"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}get data(){return this.$$.ctx.data}set data(e){this.$set({data:e}),X()}}function it(e){var t,n;function i(n){e.label_config_binding.call(null,n),t=!0,G(()=>t=!1)}let o={data:e.data};void 0!==e.config&&(o.config=e.config);var c=new nt({props:o});return B.push(()=>re(c,"config",i)),{c(){c.$$.fragment.c()},m(e,t){se(c,e,t),n=!0},p(e,n){var i={};e.data&&(i.data=n.data),!t&&e.config&&(i.config=n.config),c.$set(i)},i(e){n||(te(c.$$.fragment,e),n=!0)},o(e){ne(c.$$.fragment,e),n=!1},d(e){le(c,e)}}}function ot(e,t,n){let i,{config:o={}}=t;return e.$set=e=>{"config"in e&&n("config",o=e.config)},e.$$.update=(e={config:1})=>{e.config&&n("data",i={value:o.dataprovider.value})},{config:o,data:i,label_config_binding:function(e){n("config",o=e)}}}class ct extends ue{constructor(e){super(),de(this,e,ot,it,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function rt(e){var t,n,i=new He({props:{config:e.config.dataprovider}});i.$on("value",e.update);var o=new nt({props:{config:e.config,data:e.data}});return{c(){i.$$.fragment.c(),t=M(),o.$$.fragment.c()},m(e,c){se(i,e,c),w(e,t,c),se(o,e,c),n=!0},p(e,t){var n={};e.config&&(n.config=t.config.dataprovider),i.$set(n);var c={};e.config&&(c.config=t.config),e.data&&(c.data=t.data),o.$set(c)},i(e){n||(te(i.$$.fragment,e),te(o.$$.fragment,e),n=!0)},o(e){ne(i.$$.fragment,e),ne(o.$$.fragment,e),n=!1},d(e){le(i,e),e&&x(t),le(o,e)}}}function st(e,t,n){let{config:i={}}=t,o={value:"Load"};return e.$set=e=>{"config"in e&&n("config",i=e.config)},{config:i,data:o,update:function(e){void 0!==e.detail.value&&(o.value=e.detail.value,n("data",o))}}}class lt extends ue{constructor(e){super(),de(this,e,st,rt,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function at(e,t,n){const i=Object.create(e);return i.tick=t[n],i}function dt(e){var t,n,i,o,c,r,s,l,a,d=e.tick.label.text+"";return{c(){t=C("line"),r=C("text"),s=E(d),N(t,"x1",n=e.tick.line.x1),N(t,"y1",i=e.tick.line.y1),N(t,"x2",o=e.tick.line.x2),N(t,"y2",c=e.tick.line.y2),N(r,"x",l=e.tick.label.x),N(r,"y",a=e.tick.label.y),N(r,"class","svelte-22kg5")},m(e,n){w(e,t,n),w(e,r,n),y(r,s)},p(e,u){e.ticks&&n!==(n=u.tick.line.x1)&&N(t,"x1",n),e.ticks&&i!==(i=u.tick.line.y1)&&N(t,"y1",i),e.ticks&&o!==(o=u.tick.line.x2)&&N(t,"x2",o),e.ticks&&c!==(c=u.tick.line.y2)&&N(t,"y2",c),e.ticks&&d!==(d=u.tick.label.text+"")&&P(s,d),e.ticks&&l!==(l=u.tick.label.x)&&N(r,"x",l),e.ticks&&a!==(a=u.tick.label.y)&&N(r,"y",a)},d(e){e&&(x(t),x(r))}}}function ut(t){for(var n,i,o,c,r,s,l,a,d,u,f,p=Number(t.value).toFixed(t.labeldecimals)+"",g=t.ticks,m=[],$=0;$<g.length;$+=1)m[$]=dt(at(t,g,$));return{c(){n=_("div"),i=C("svg"),o=C("g");for(var e=0;e<m.length;e+=1)m[e].c();c=C("path"),r=C("path"),s=C("polygon"),l=M(),a=_("div"),d=E(p),N(o,"class","scale svelte-22kg5"),N(c,"class","outline svelte-22kg5"),N(c,"d",t.outline),N(r,"class","meter svelte-22kg5"),N(r,"d",t.meter),N(s,"class","needle svelte-22kg5"),N(s,"points",t.needle),N(i,"height","165"),N(i,"width",t.W),N(i,"view-box","0 0 "+t.W+" 165"),N(a,"class","output svelte-22kg5"),N(n,"class",u="gauge "+t.config.class+" svelte-22kg5"),N(n,"style",f=t.config.style)},m(e,t){w(e,n,t),y(n,i),y(i,o);for(var u=0;u<m.length;u+=1)m[u].m(o,null);y(i,c),y(i,r),y(i,s),y(n,l),y(n,a),y(a,d)},p(e,t){if(e.ticks){g=t.ticks;for(var i=0;i<g.length;i+=1){const n=at(t,g,i);m[i]?m[i].p(e,n):(m[i]=dt(n),m[i].c(),m[i].m(o,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=g.length}e.meter&&N(r,"d",t.meter),e.needle&&N(s,"points",t.needle),(e.value||e.labeldecimals)&&p!==(p=Number(t.value).toFixed(t.labeldecimals)+"")&&P(d,p),e.config&&u!==(u="gauge "+t.config.class+" svelte-22kg5")&&N(n,"class",u),e.config&&f!==(f=t.config.style)&&N(n,"style",f)},i:e,o:e,d(e){e&&x(n),k(m,e)}}}function ft(e,t,n){let i,o,c,r,s,l,a,d,u,{config:f,data:p={value:0}}=t,g=Math.PI/180,m=150,$=160,v=m-40,h=~~(v/4),b=v-h,y=40,w=$,x=function(e,t,n,i,o){let c=e+n,r=n-o;return"M "+c+", "+t+" A"+n+","+n+" 0 0 0 "+i+","+t+" H"+(i+o)+" A"+r+","+r+" 0 0 1 "+(c-o)+","+t+" z"}(m,$,v,40,h);return e.$set=e=>{"config"in e&&n("config",f=e.config),"data"in e&&n("data",p=e.data)},e.$$.update=(e={config:1,min:1,max:1,data:1,value:1,cx:1,cy:1,r1:1,offset:1,delta:1,a:1})=>{e.config&&n("labeldecimals",d=f.dataprovider.labeldecimals),e.config&&(u=f.dataprovider.tickdecimals),(e.config||e.min||e.max||e.data||e.value||e.cx||e.cy||e.r1||e.offset||e.delta||e.a)&&(n("min",s=f.dataprovider.min),n("max",l=f.dataprovider.max),(isNaN(s)||""===s)&&n("min",s=0),(isNaN(l)||""===l)&&n("max",l=100),n("min",s*=1),n("max",l*=1),s>l&&(n("min",s=0),n("max",l=100)),n("value",a=function(e,t,n){let i=e;return(isNaN(e)||""===e)&&(i=t),i*=1,(e<t||e>n)&&(i=t),i}(p.value,s,l)),n("ticks",i=function(e,t){let n=v+5,i=b-5,o=v+20,c=[],r=0,s=Math.abs(t-e)/10;for(let t=-180;t<=0;t+=18){let l={x1:m+n*Math.cos(t*g),y1:$+n*Math.sin(t*g),x2:m+i*Math.cos(t*g),y2:$+i*Math.sin(t*g)},a=e+r*s,d={x:m+o*Math.cos(t*g),y:$+o*Math.sin(t*g),text:u?a.toFixed(u):a};c.push({line:l,label:d}),r++}return c}(s,l)),n("a",o=function(e,t,n){let i=180/Math.abs(n-t),o=(e+Math.abs(0-t))*i-180,c={};c.x=m+v*Math.cos(o*g),c.y=$+v*Math.sin(o*g);let r=c.x,s=c.y,l=m-r,a=$-s;return Math.atan2(a,l)/g-180}(a,s,l)),n("meter",c=function(e,t,n,i,o,c){c*=g;let r=n-o,s=e+n*Math.cos(c),l=t+n*Math.sin(c),a=e+r*Math.cos(c),d=t+r*Math.sin(c);return"M "+s+", "+l+" A"+n+","+n+" 0 0 0 "+y+","+w+" H"+(i+o)+" A"+r+","+r+" 0 0 1 "+a+","+d+" z"}(m,$,v,40,h,o)),n("needle",r=function(e,t,n,i){return e+5*Math.cos((i-90)*g)+","+(t+5*Math.sin((i-90)*g))+" "+(e+(n+15)*Math.cos(i*g))+","+(t+(n+15)*Math.sin(i*g))+" "+(e+5*Math.cos((i+90)*g))+","+(t+5*Math.sin((i+90)*g))}(m,$,v,o)))},{config:f,data:p,W:300,outline:x,ticks:i,meter:c,needle:r,value:a,labeldecimals:d}}class pt extends ue{constructor(e){super(),de(this,e,ft,ut,s,["config","data"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}get data(){return this.$$.ctx.data}set data(e){this.$set({data:e}),X()}}function gt(e){var t,n=new pt({props:{config:e.config,data:e.data}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.config&&(i.config=t.config),e.data&&(i.data=t.data),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function mt(e,t,n){let i,{config:o={}}=t;return e.$set=e=>{"config"in e&&n("config",o=e.config)},e.$$.update=(e={config:1})=>{e.config&&n("data",i={value:o.dataprovider.value})},{config:o,data:i}}class $t extends ue{constructor(e){super(),de(this,e,mt,gt,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function vt(e){var t,n,i=new He({props:{config:e.config.dataprovider}});i.$on("value",e.update);var o=new pt({props:{config:e.config,data:e.data}});return{c(){i.$$.fragment.c(),t=M(),o.$$.fragment.c()},m(e,c){se(i,e,c),w(e,t,c),se(o,e,c),n=!0},p(e,t){var n={};e.config&&(n.config=t.config.dataprovider),i.$set(n);var c={};e.config&&(c.config=t.config),e.data&&(c.data=t.data),o.$set(c)},i(e){n||(te(i.$$.fragment,e),te(o.$$.fragment,e),n=!0)},o(e){ne(i.$$.fragment,e),ne(o.$$.fragment,e),n=!1},d(e){le(i,e),e&&x(t),le(o,e)}}}function ht(e,t,n){let{config:i={}}=t,o={value:0};return e.$set=e=>{"config"in e&&n("config",i=e.config)},{config:i,data:o,update:function(e){void 0!==e.detail.value&&(o.value=e.detail.value,n("data",o))}}}class bt extends ue{constructor(e){super(),de(this,e,ht,vt,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function yt(e){let t=JSON.parse(e);return function e(t,n){be(t,n);if(n.items)for(const t of n.items)e(n,t)}(void 0,t),ge.set(t),t}const wt=()=>({}),xt=()=>({}),kt=()=>({}),_t=()=>({});function Ct(e){var t,n,i,o,c,r,s,l;const a=e.$$slots.aside,p=d(a,e,_t),g=e.$$slots.main,m=d(g,e,xt);return{c(){t=_("div"),n=_("button"),i=M(),o=_("div"),p&&p.c(),c=M(),r=_("div"),m&&m.c(),N(n,"class","button extra svelte-1k2tphv"),N(o,"class","aside svelte-1k2tphv"),N(r,"class","main svelte-1k2tphv"),N(t,"class","drawer svelte-1k2tphv"),j(t,"open",e.open),l=S(n,"click",e.toggle)},l(e){p&&p.l(div0_nodes),m&&m.l(div1_nodes)},m(l,a){w(l,t,a),y(t,n),e.button_1_binding(n),y(t,i),y(t,o),p&&p.m(o,null),e.div0_binding(o),y(t,c),y(t,r),m&&m.m(r,null),e.div1_binding(r),s=!0},p(e,n){p&&p.p&&e.$$scope&&p.p(f(a,n,e,kt),u(a,n,_t)),m&&m.p&&e.$$scope&&m.p(f(g,n,e,wt),u(g,n,xt)),e.open&&j(t,"open",n.open)},i(e){s||(te(p,e),te(m,e),s=!0)},o(e){ne(p,e),ne(m,e),s=!1},d(n){n&&x(t),e.button_1_binding(null),p&&p.d(n),e.div0_binding(null),m&&m.d(n),e.div1_binding(null),l()}}}function Et(e,t,n){let i,o,c,{config:r={}}=t,s=!0;let{$$slots:l={},$$scope:a}=t;return e.$set=e=>{"config"in e&&n("config",r=e.config),"$$scope"in e&&n("$$scope",a=e.$$scope)},{config:r,open:s,button:i,aside:o,main:c,toggle:function(){n("open",s=!s)},button_1_binding:function(e){B[e?"unshift":"push"](()=>{n("button",i=e)})},div0_binding:function(e){B[e?"unshift":"push"](()=>{n("aside",o=e)})},div1_binding:function(e){B[e?"unshift":"push"](()=>{n("main",c=e)})},$$slots:l,$$scope:a}}class Mt extends ue{constructor(e){super(),de(this,e,Et,Ct,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function Ot(e,t,n){const i=Object.create(e);return i.item=t[n],i}function St(e){var t,n,i=[],o=new Map,c=e.config.items;const r=e=>e.item.id;for(var s=0;s<c.length;s+=1){let t=Ot(e,c,s),n=r(t);o.set(n,i[s]=Nt(n,t))}return{c(){for(t=_("ul"),s=0;s<i.length;s+=1)i[s].c();N(t,"class","svelte-v4ntu6")},m(e,o){for(w(e,t,o),s=0;s<i.length;s+=1)i[s].m(t,null);n=!0},p(e,n){const c=n.config.items;Z(),i=function(e,t,n,i,o,c,r,s,l,a,d,u){let f=e.length,p=c.length,g=f;const m={};for(;g--;)m[e[g].key]=g;const $=[],v=new Map,h=new Map;for(g=p;g--;){const e=u(o,c,g),s=n(e);let l=r.get(s);l?i&&l.p(t,e):(l=a(s,e)).c(),v.set(s,$[g]=l),s in m&&h.set(s,Math.abs(g-m[s]))}const b=new Set,y=new Set;function w(e){te(e,1),e.m(s,d),r.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=$[p-1],n=e[f-1],i=t.key,o=n.key;t===n?(d=t.first,f--,p--):v.has(o)?!r.has(i)||b.has(i)?w(t):y.has(o)?f--:h.get(i)>h.get(o)?(y.add(i),w(t)):(b.add(o),f--):(l(n,r),f--)}for(;f--;){const t=e[f];v.has(t.key)||l(t,r)}for(;p;)w($[p-1]);return $}(i,e,r,1,n,c,o,t,ce,Nt,null,Ot),ee()},i(e){if(!n){for(var t=0;t<c.length;t+=1)te(i[t]);n=!0}},o(e){for(s=0;s<i.length;s+=1)ne(i[s]);n=!1},d(e){for(e&&x(t),s=0;s<i.length;s+=1)i[s].d()}}}function Nt(e,t){var n,i,o,c;function r(e){t.treenode_selected_binding.call(null,e),i=!0,G(()=>i=!1)}let s={config:t.item,iconizer:t.iconizer};void 0!==t.selected&&(s.selected=t.selected);var l=new Lt({props:s});return B.push(()=>re(l,"selected",r)),{key:e,first:null,c(){n=_("li"),l.$$.fragment.c(),o=M(),N(n,"class","svelte-v4ntu6"),this.first=n},m(e,t){w(e,n,t),se(l,n,null),y(n,o),c=!0},p(e,t){var n={};e.config&&(n.config=t.item),e.iconizer&&(n.iconizer=t.iconizer),!i&&e.selected&&(n.selected=t.selected),l.$set(n)},i(e){c||(te(l.$$.fragment,e),c=!0)},o(e){ne(l.$$.fragment,e),c=!1},d(e){e&&x(n),le(l)}}}function Pt(e){var t,n,i,o,c,r,s,l=e.config.name+"",a=null!=e.config.items&&St(e);return{c(){t=_("span"),n=E(l),o=M(),a&&a.c(),c=O(),N(t,"id",i=e.config.id),N(t,"style",e.style),N(t,"class","svelte-v4ntu6"),j(t,"selected",e.selected===e.config.id),s=S(t,"click",e.click_handler)},m(e,i){w(e,t,i),y(t,n),w(e,o,i),a&&a.m(e,i),w(e,c,i),r=!0},p(e,o){r&&!e.config||l===(l=o.config.name+"")||P(n,l),r&&!e.config||i===(i=o.config.id)||N(t,"id",i),r&&!e.style||N(t,"style",o.style),(e.selected||e.config)&&j(t,"selected",o.selected===o.config.id),null!=o.config.items?a?(a.p(e,o),te(a,1)):((a=St(o)).c(),te(a,1),a.m(c.parentNode,c)):a&&(Z(),ne(a,1,1,()=>{a=null}),ee())},i(e){r||(te(a),r=!0)},o(e){ne(a),r=!1},d(e){e&&(x(t),x(o)),a&&a.d(e),e&&x(c),s()}}}function zt(e,t,n){let{config:i,selected:o,iconizer:c}=t,r="",s=c?c(i):void 0;return s&&n("style",r="background: url(icons/"+s+") 0 0 no-repeat;"),e.$set=e=>{"config"in e&&n("config",i=e.config),"selected"in e&&n("selected",o=e.selected),"iconizer"in e&&n("iconizer",c=e.iconizer)},{config:i,selected:o,iconizer:c,style:r,click_handler:function(e){const t=o=i.id;return n("selected",o),t},treenode_selected_binding:function(e){n("selected",o=e)}}}class Lt extends ue{constructor(e){super(),de(this,e,zt,Pt,s,["config","selected","iconizer"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}get iconizer(){return this.$$.ctx.iconizer}set iconizer(e){this.$set({iconizer:e}),X()}}function Dt(e){var t,n,i;function o(t){e.treenode_selected_binding.call(null,t),n=!0,G(()=>n=!1)}let c={config:e.config,iconizer:e.iconizer};void 0!==e.selected&&(c.selected=e.selected);var r=new Lt({props:c});return B.push(()=>re(r,"selected",o)),{c(){t=_("div"),r.$$.fragment.c(),N(t,"class","tree")},m(e,n){w(e,t,n),se(r,t,null),i=!0},p(e,t){var i={};e.config&&(i.config=t.config),e.iconizer&&(i.iconizer=t.iconizer),!n&&e.selected&&(i.selected=t.selected),r.$set(i)},i(e){i||(te(r.$$.fragment,e),i=!0)},o(e){ne(r.$$.fragment,e),i=!1},d(e){e&&x(t),le(r)}}}function jt(e,t,n){let{config:i={},selected:o=null,iconizer:c}=t;return e.$set=e=>{"config"in e&&n("config",i=e.config),"selected"in e&&n("selected",o=e.selected),"iconizer"in e&&n("iconizer",c=e.iconizer)},{config:i,selected:o,iconizer:c,treenode_selected_binding:function(e){n("selected",o=e)}}}class It extends ue{constructor(e){super(),de(this,e,jt,Dt,s,["config","selected","iconizer"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}get iconizer(){return this.$$.ctx.iconizer}set iconizer(e){this.$set({iconizer:e}),X()}}const{Object:Tt}=oe;function At(e,t,n){const i=Tt.create(e);return i.key=t[n],i}function Rt(e){var t,n,i,o,c,r,s=e.key+"";function l(){e.input_input_handler.call(c,e)}return{c(){t=_("div"),n=E(s),i=M(),o=_("div"),N(c=_("input"),"type","text"),N(o,"class","editable-value"),r=S(c,"input",l)},m(r,s){w(r,t,s),y(t,n),w(r,i,s),w(r,o,s),y(o,c),z(c,e.properties[e.key])},p(t,i){e=i,t.properties&&s!==(s=e.key+"")&&P(n,s),(t.properties||t.Object)&&c.value!==e.properties[e.key]&&z(c,e.properties[e.key])},d(e){e&&(x(t),x(i),x(o)),r()}}}function Ft(e){var t,n=!e.nonEditable.includes(e.key),i=n&&Rt(e);return{c(){i&&i.c(),t=O()},m(e,n){i&&i.m(e,n),w(e,t,n)},p(e,o){e.properties&&(n=!o.nonEditable.includes(o.key)),n?i?i.p(e,o):((i=Rt(o)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){i&&i.d(e),e&&x(t)}}}function qt(t){for(var n,i=t.Object.keys(t.properties).sort(),o=[],c=0;c<i.length;c+=1)o[c]=Ft(At(t,i,c));return{c(){for(var e=0;e<o.length;e+=1)o[e].c();n=O()},m(e,t){for(var i=0;i<o.length;i+=1)o[i].m(e,t);w(e,n,t)},p(e,t){if(e.nonEditable||e.Object||e.properties){i=t.Object.keys(t.properties).sort();for(var c=0;c<i.length;c+=1){const r=At(t,i,c);o[c]?o[c].p(e,r):(o[c]=Ft(r),o[c].c(),o[c].m(n.parentNode,n))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},i:e,o:e,d(e){k(o,e),e&&x(n)}}}function Bt(e,t,n){let{component:i,provider:o,properties:c}=t,r={};return e.$set=e=>{"component"in e&&n("component",i=e.component),"provider"in e&&n("provider",o=e.provider),"properties"in e&&n("properties",c=e.properties)},e.$$.update=(e={provider:1,component:1,defaultConfig:1,properties:1})=>{(e.provider||e.component||e.defaultConfig||e.properties)&&o&&(n("defaultConfig",r=me[i].dataproviders[o].defaults),r&&(Object.keys(r).forEach(e=>{e in c||(c[e]=r[e],n("properties",c),n("provider",o),n("component",i),n("defaultConfig",r))}),Object.keys(c).forEach(e=>{"name"===e||e in r||delete c[e]})))},{component:i,provider:o,properties:c,nonEditable:["name","id","items","par"],Object:Object,input_input_handler:function({key:e}){c[e]=this.value,n("properties",c),n("provider",o),n("component",i),n("defaultConfig",r),n("Object",Object)}}}class Ut extends ue{constructor(e){super(),de(this,e,Bt,qt,s,["component","provider","properties"])}get component(){return this.$$.ctx.component}set component(e){this.$set({component:e}),X()}get provider(){return this.$$.ctx.provider}set provider(e){this.$set({provider:e}),X()}get properties(){return this.$$.ctx.properties}set properties(e){this.$set({properties:e}),X()}}function Vt(e,t,n){const i=Object.create(e);return i.provider=t[n],i}function Wt(e,t,n){const i=Object.create(e);return i.key=t[n],i}function Ht(t){var n,i,o,c,r,s,l=t.key+"";function a(){t.input_input_handler.call(r,t)}return{c(){n=_("div"),i=E(l),o=M(),c=_("div"),N(r=_("input"),"type","text"),N(c,"class","editable-value"),s=S(r,"input",a)},m(e,s){w(e,n,s),y(n,i),w(e,o,s),w(e,c,s),y(c,r),z(r,t.$properties[t.key])},p(e,n){t=n,e.$properties&&l!==(l=t.key+"")&&P(i,l),e.$properties&&r.value!==t.$properties[t.key]&&z(r,t.$properties[t.key])},i:e,o:e,d(e){e&&(x(n),x(o),x(c)),s()}}}function Jt(e){for(var t,n,i,o,c,r,s,l,a=Object.keys(me[e.$properties.name].dataproviders),d=[],u=0;u<a.length;u+=1)d[u]=Gt(Vt(e,a,u));function f(){e.select_change_handler.call(o,e)}function p(t){e.dataproviderpropertieseditor_properties_binding.call(null,t),r=!0,G(()=>r=!1)}let g={component:e.$properties.name,provider:e.$properties[e.key].name};void 0!==e.$properties.dataprovider&&(g.properties=e.$properties.dataprovider);var m=new Ut({props:g});return B.push(()=>re(m,"properties",p)),{c(){(t=_("div")).textContent="dataprovider",n=M(),i=_("div"),o=_("select");for(var r=0;r<d.length;r+=1)d[r].c();c=M(),m.$$.fragment.c(),void 0===e.$properties[e.key].name&&J(f),N(i,"class","editable-value"),l=S(o,"change",f)},m(r,l){w(r,t,l),w(r,n,l),w(r,i,l),y(i,o);for(var a=0;a<d.length;a+=1)d[a].m(o,null);D(o,e.$properties[e.key].name),w(r,c,l),se(m,r,l),s=!0},p(t,n){if(e=n,t.widgets||t.$properties){a=Object.keys(me[e.$properties.name].dataproviders);for(var i=0;i<a.length;i+=1){const n=Vt(e,a,i);d[i]?d[i].p(t,n):(d[i]=Gt(n),d[i].c(),d[i].m(o,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=a.length}t.$properties&&D(o,e.$properties[e.key].name);var c={};t.$properties&&(c.component=e.$properties.name),t.$properties&&(c.provider=e.$properties[e.key].name),!r&&t.$properties&&(c.properties=e.$properties.dataprovider),m.$set(c)},i(e){s||(te(m.$$.fragment,e),s=!0)},o(e){ne(m.$$.fragment,e),s=!1},d(e){e&&(x(t),x(n),x(i)),k(d,e),e&&x(c),le(m,e),l()}}}function Gt(e){var t,n,i,o=e.provider+"";return{c(){t=_("option"),n=E(o),t.__value=i=e.provider,t.value=t.__value},m(e,i){w(e,t,i),y(t,n)},p(e,c){e.$properties&&o!==(o=c.provider+"")&&P(n,o),e.$properties&&i!==(i=c.provider)&&(t.__value=i),t.value=t.__value},d(e){e&&x(t)}}}function Xt(e){var t,n,i,o,c,r=[Jt,Ht],s=[];function l(e,n){return"dataprovider"===n.key?0:((null==t||e.$properties)&&(t=!n.noneditable.includes(n.key)),t?1:-1)}return~(n=l(null,e))&&(i=s[n]=r[n](e)),{c(){i&&i.c(),o=O()},m(e,t){~n&&s[n].m(e,t),w(e,o,t),c=!0},p(e,t){var c=n;(n=l(e,t))===c?~n&&s[n].p(e,t):(i&&(Z(),ne(s[c],1,1,()=>{s[c]=null}),ee()),~n?((i=s[n])||(i=s[n]=r[n](t)).c(),te(i,1),i.m(o.parentNode,o)):i=null)},i(e){c||(te(i),c=!0)},o(e){ne(i),c=!1},d(e){~n&&s[n].d(e),e&&x(o)}}}function Yt(e){for(var t,n,i=Object.keys(e.$properties).sort(),o=[],c=0;c<i.length;c+=1)o[c]=Xt(Wt(e,i,c));const r=e=>ne(o[e],1,1,()=>{o[e]=null});return{c(){for(var e=0;e<o.length;e+=1)o[e].c();t=O()},m(e,i){for(var c=0;c<o.length;c+=1)o[c].m(e,i);w(e,t,i),n=!0},p(e,n){if(e.$properties||e.widgets||e.noneditable){i=Object.keys(n.$properties).sort();for(var c=0;c<i.length;c+=1){const r=Wt(n,i,c);o[c]?(o[c].p(e,r),te(o[c],1)):(o[c]=Xt(r),o[c].c(),te(o[c],1),o[c].m(t.parentNode,t))}for(Z(),c=i.length;c<o.length;c+=1)r(c);ee()}},i(e){if(!n){for(var t=0;t<i.length;t+=1)te(o[t]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ne(o[e]);n=!1},d(e){k(o,e),e&&x(t)}}}function Kt(t,n,i){let o,c=e;t.$$.on_destroy.push(()=>c());let{selected:r}=n;let s;return t.$set=e=>{"selected"in e&&i("selected",r=e.selected)},t.$$.update=(e={selected:1})=>{e.selected&&(s=ve[r],c(),c=l(s,e=>{i("$properties",o=e)}),i("properties",s))},{selected:r,noneditable:["name","id","items","par"],properties:s,$properties:o,select_change_handler:function({key:e}){s.update(t=>(t[e].name=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),t)),i("widgets",me)},dataproviderpropertieseditor_properties_binding:function(e){o.dataprovider=e,s.set(o)},input_input_handler:function({key:e}){s.update(t=>(t[e]=this.value,t)),i("widgets",me)}}}class Qt extends ue{constructor(e){super(),de(this,e,Kt,Yt,s,["selected"])}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}}function Zt(e,t,n){const i=Object.create(e);return i.component=t[n],i}function en(e){var t,n,i=e.component+"";return{c(){t=_("option"),n=E(i),t.__value=e.component,t.value=t.__value},m(e,i){w(e,t,i),y(t,n)},p(e,n){t.value=t.__value},d(e){e&&x(t)}}}function tn(t){for(var n,i,o,r,s,l,a,d,u,f,p,g,m,$,v,h,b,C,O,P,z,L,D,j,I,T,A,R,F=Object.keys(me),q=[],B=0;B<F.length;B+=1)q[B]=en(Zt(t,F,B));return{c(){n=_("div"),i=_("div"),o=_("button"),r=_("i"),s=E(" Add"),a=M(),d=_("select");for(var e=0;e<q.length;e+=1)q[e].c();u=M(),f=_("div"),p=_("button"),g=_("i"),m=E(" Remove"),v=M(),h=_("div"),b=_("div"),C=_("button"),O=_("i"),P=E(" Up"),L=M(),D=_("div"),j=_("button"),I=_("i"),T=E(" Down"),N(r,"class","button-icon add svelte-1odghn3"),o.disabled=l="Panel"!==t.$properties.name&&"Display"!==t.$properties.name,N(i,"class","add-options svelte-1odghn3"),N(g,"class","button-icon remove svelte-1odghn3"),p.disabled=$="Display"===t.$properties.name,N(f,"class","trash-pane"),N(n,"class","edit-pane svelte-1odghn3"),N(O,"class","button-icon arrow-up svelte-1odghn3"),C.disabled=z=!t.canMoveUp,N(I,"class","button-icon arrow-down svelte-1odghn3"),j.disabled=A=!t.canMoveDown,N(h,"class","order-pane svelte-1odghn3"),R=[S(o,"click",t.add),S(p,"click",t.remove),S(C,"click",t.up),S(j,"click",t.down)]},m(e,c){w(e,n,c),y(n,i),y(i,o),y(o,r),y(o,s),y(i,a),y(i,d);for(var l=0;l<q.length;l+=1)q[l].m(d,null);t.select_binding(d),y(n,u),y(n,f),y(f,p),y(p,g),y(p,m),w(e,v,c),w(e,h,c),y(h,b),y(b,C),y(C,O),y(C,P),y(h,L),y(h,D),y(D,j),y(j,I),y(j,T)},p(e,t){if(e.$properties&&l!==(l="Panel"!==t.$properties.name&&"Display"!==t.$properties.name)&&(o.disabled=l),e.widgets){F=Object.keys(me);for(var n=0;n<F.length;n+=1){const i=Zt(t,F,n);q[n]?q[n].p(e,i):(q[n]=en(i),q[n].c(),q[n].m(d,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=F.length}e.$properties&&$!==($="Display"===t.$properties.name)&&(p.disabled=$),e.canMoveUp&&z!==(z=!t.canMoveUp)&&(C.disabled=z),e.canMoveDown&&A!==(A=!t.canMoveDown)&&(j.disabled=A)},i:e,o:e,d(e){e&&x(n),k(q,e),t.select_binding(null),e&&(x(v),x(h)),c(R)}}}function nn(t,n,i){let o,c=e;t.$$.on_destroy.push(()=>c());let r,{selected:s}=n;let a,d=!1,u=!1;return t.$set=e=>{"selected"in e&&i("selected",s=e.selected)},t.$$.update=(e={selected:1,$properties:1})=>{if(e.selected&&(a=ve[s],c(),c=l(a,e=>{i("$properties",o=e)}),i("properties",a)),e.$properties&&o.par){let e=0;o.par.items.forEach(function(t,n){t.id!==o.id||(e=n)});let t=o.par.items.length-1;i("canMoveUp",d=e>0),i("canMoveDown",u=e<t)}},{selected:s,addComponentSelect:r,add:function(){if(o){let e={};e.name=r.value,"Panel"===e.name&&(e.items=[]),ge.addChild(o,e)}},remove:function(){if(o){let e=o.par,t=e.items.findIndex(function(e){return e.id===s}),n=(t>0&&e.items[t-1],o);i("selected",s="puddy-0"),ge.remove(n)}},up:function(){o&&ge.up(o)},down:function(){o&&ge.down(o)},canMoveUp:d,canMoveDown:u,properties:a,$properties:o,select_binding:function(e){B[e?"unshift":"push"](()=>{i("addComponentSelect",r=e)})}}}class on extends ue{constructor(e){super(),de(this,e,nn,tn,s,["selected"])}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}}function cn(t){var n,i,o=t.error.message+"";return{c(){n=_("p"),i=E(o),L(n,"color","red")},m(e,t){w(e,n,t),y(n,i)},p(e,t){e.promise&&o!==(o=t.error.message+"")&&P(i,o)},i:e,o:e,d(e){e&&x(n)}}}function rn(e){var t,n,i=e.config&&sn(e);return{c(){i&&i.c(),t=O()},m(e,o){i&&i.m(e,o),w(e,t,o),n=!0},p(e,n){n.config?i?(i.p(e,n),te(i,1)):((i=sn(n)).c(),te(i,1),i.m(t.parentNode,t)):i&&(Z(),ne(i,1,1,()=>{i=null}),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){i&&i.d(e),e&&x(t)}}}function sn(e){var t,n,i,o,r,s,l,a,d,u,f,p,g,m,$,v,h,b,k,C,E,O,P,z,L,D,j,I,T,A;function R(){return e.click_handler(e)}function F(t){e.tree_selected_binding.call(null,t),m=!0,G(()=>m=!1)}let q={config:e.$model,iconizer:e.iconizer};void 0!==e.selected&&(q.selected=e.selected);var U=new It({props:q});B.push(()=>re(U,"selected",F));var V=e.selected&&ln(e),W=e.selected&&an(e);return{c(){t=_("div"),n=_("div"),(i=_("button")).textContent="Menu",o=M(),(r=_("button")).textContent="Save",s=M(),l=_("div"),a=_("div"),d=_("hr"),u=M(),(f=_("span")).textContent="Model",p=M(),g=_("div"),U.$$.fragment.c(),$=M(),v=_("div"),h=_("hr"),b=M(),(k=_("span")).textContent="Properties",C=M(),E=_("div"),V&&V.c(),O=M(),P=_("div"),z=_("hr"),L=M(),(D=_("span")).textContent="Actions",j=M(),I=_("div"),W&&W.c(),N(r,"class","save-button svelte-dhtc2g"),N(n,"class","button-bar svelte-dhtc2g"),N(f,"class","detail-header svelte-dhtc2g"),N(g,"class","detail-pane tree-pane svelte-dhtc2g"),N(a,"class","flex-cell svelte-dhtc2g"),N(k,"class","detail-header svelte-dhtc2g"),N(E,"class","detail-pane properties-pane svelte-dhtc2g"),N(v,"class","flex-cell svelte-dhtc2g"),N(D,"class","detail-header svelte-dhtc2g"),N(I,"class","detail-pane action-pane svelte-dhtc2g"),N(P,"class","flex-cell svelte-dhtc2g"),N(l,"class","pane-grid svelte-dhtc2g"),N(t,"class","wrapper svelte-dhtc2g"),A=[S(i,"click",pn),S(r,"click",R)]},m(e,c){w(e,t,c),y(t,n),y(n,i),y(n,o),y(n,r),y(t,s),y(t,l),y(l,a),y(a,d),y(a,u),y(a,f),y(a,p),y(a,g),se(U,g,null),y(l,$),y(l,v),y(v,h),y(v,b),y(v,k),y(v,C),y(v,E),V&&V.m(E,null),y(l,O),y(l,P),y(P,z),y(P,L),y(P,D),y(P,j),y(P,I),W&&W.m(I,null),T=!0},p(t,n){e=n;var i={};t.$model&&(i.config=e.$model),t.iconizer&&(i.iconizer=e.iconizer),!m&&t.selected&&(i.selected=e.selected),U.$set(i),e.selected?V?(V.p(t,e),te(V,1)):((V=ln(e)).c(),te(V,1),V.m(E,null)):V&&(Z(),ne(V,1,1,()=>{V=null}),ee()),e.selected?W?(W.p(t,e),te(W,1)):((W=an(e)).c(),te(W,1),W.m(I,null)):W&&(Z(),ne(W,1,1,()=>{W=null}),ee())},i(e){T||(te(U.$$.fragment,e),te(V),te(W),T=!0)},o(e){ne(U.$$.fragment,e),ne(V),ne(W),T=!1},d(e){e&&x(t),le(U),V&&V.d(),W&&W.d(),c(A)}}}function ln(e){var t,n=new Qt({props:{selected:e.selected}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.selected&&(i.selected=t.selected),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function an(e){var t,n=new on({props:{selected:e.selected}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.selected&&(i.selected=t.selected),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function dn(t){var n;return{c(){(n=_("p")).textContent="...waiting"},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function un(e){var t,i,o;let c={ctx:e,current:null,token:null,pending:dn,then:rn,catch:cn,value:"config",error:"error",blocks:[,,,]};return ie(i=e.promise,c),{c(){t=O(),c.block.c()},m(e,n){w(e,t,n),c.block.m(e,c.anchor=n),c.mount=()=>t.parentNode,c.anchor=t,o=!0},p(t,o){e=o,c.ctx=e,"promise"in t&&i!==(i=e.promise)&&ie(i,c)||c.block.p(t,n(n({},e),c.resolved))},i(e){o||(te(c.block),o=!0)},o(e){for(let e=0;e<3;e+=1){ne(c.blocks[e])}o=!1},d(e){e&&x(t),c.block.d(e),c.token=null,c=null}}}function fn(e){let t={};!function e(t,n){let i=Object.keys(t);i.sort(),n.name=t.name,i.forEach(e=>{""!==t[e]&&(n[e]=t[e])}),t.items&&(n.items=[],t.items.forEach(t=>{let i={};n.items.push(i),e(t,i)}))}(e,t);let n=JSON.stringify(t,function(e,t){return"id"===e||"par"===e?void 0:t},2),i=document.createElement("a"),o=e.title||"display";i.href="data:application/json,"+encodeURIComponent(n),i.download=o+".puddy",i.click()}function pn(){var e=[location.protocol,"//",location.host,location.pathname].join("");window.location.href=e}function gn(e,t,n){let i;a(e,ge,e=>{n("$model",i=e)});let o,{promise:c}=t;A(()=>{c.then(function(){n("selected",o="puddy-0")})});return e.$set=e=>{"promise"in e&&n("promise",c=e.promise)},{promise:c,selected:o,iconizer:function(e){let t=void 0,n=me[e.name];return n?t=n.icon:"Display"===e.name&&(t="tv.svg"),t},$model:i,click_handler:function({config:e}){return fn(e)},tree_selected_binding:function(e){n("selected",o=e)}}}class mn extends ue{constructor(e){super(),de(this,e,gn,un,s,["promise"])}get promise(){return this.$$.ctx.promise}set promise(e){this.$set({promise:e}),X()}}function $n(e){var t,n,i;const o=e.$$slots.default,c=d(o,e,null);return{c(){t=_("span"),c&&c.c(),i=S(t,"click",e.click_handler)},l(e){c&&c.l(span_1_nodes)},m(i,o){w(i,t,o),c&&c.m(t,null),e.span_1_binding(t),n=!0},p(e,t){c&&c.p&&e.$$scope&&c.p(f(o,t,e,null),u(o,t,null))},i(e){n||(te(c,e),n=!0)},o(e){ne(c,e),n=!1},d(n){n&&x(t),c&&c.d(n),e.span_1_binding(null),i()}}}function vn(e,t,n){let i,{selected_class:o="selected",selected:c=null,filter:r="*"}=t;let s,{$$slots:l={},$$scope:a}=t;return e.$set=e=>{"selected_class"in e&&n("selected_class",o=e.selected_class),"selected"in e&&n("selected",c=e.selected),"filter"in e&&n("filter",r=e.filter),"$$scope"in e&&n("$$scope",a=e.$$scope)},e.$$.update=(e={span:1,filter:1,descendents:1,selected_class:1,selected:1})=>{(e.span||e.filter)&&n("descendents",s=i?Array.from(i.querySelectorAll(r)):[]),(e.descendents||e.selected_class||e.selected)&&s.forEach(e=>e.classList.toggle(o,e===c))},{selected_class:o,selected:c,filter:r,span:i,refresh:function(){n("descendents",s=Array.from(i.querySelectorAll(r)))},select:function(e){n("selected",c=i.querySelector(e))},descendents:s,span_1_binding:function(e){B[e?"unshift":"push"](()=>{n("span",i=e)})},click_handler:function(e){const t=c=s.find(t=>t===e.target);return n("selected",c),t},$$slots:l,$$scope:a}}class hn extends ue{constructor(e){super(),de(this,e,vn,$n,s,["selected_class","selected","filter","refresh","select"])}get selected_class(){return this.$$.ctx.selected_class}set selected_class(e){this.$set({selected_class:e}),X()}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}get filter(){return this.$$.ctx.filter}set filter(e){this.$set({filter:e}),X()}get refresh(){return this.$$.ctx.refresh}get select(){return this.$$.ctx.select}}function bn(e){var t;return{c(){(t=_("ul")).innerHTML='<li class="svelte-1h52675">Open</li> <li class="svelte-1h52675">New</li>',N(t,"class","svelte-1h52675")},m(e,n){w(e,t,n)},d(e){e&&x(t)}}}function yn(e){var t,n,i,o,c;function r(t){e.selectable_1_selected_binding.call(null,t),o=!0,G(()=>o=!1)}let s={filter:"li",$$slots:{default:[bn]},$$scope:{ctx:e}};void 0!==e.selected&&(s.selected=e.selected);var l=new hn({props:s});return e.selectable_1_binding(l),B.push(()=>re(l,"selected",r)),{c(){t=_("div"),(n=_("h1")).innerHTML='<i class="logo-icon svelte-1h52675"></i> Puddysticks',i=M(),l.$$.fragment.c(),N(n,"class","svelte-1h52675"),N(t,"class","svelte-1h52675")},m(e,o){w(e,t,o),y(t,n),y(t,i),se(l,t,null),c=!0},p(e,t){var n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),!o&&e.selected&&(n.selected=t.selected),l.$set(n)},i(e){c||(te(l.$$.fragment,e),c=!0)},o(e){ne(l.$$.fragment,e),c=!1},d(n){n&&x(t),e.selectable_1_binding(null),le(l)}}}function wn(e,t,n){let i,{selected:o={}}=t;return A(()=>{i.select("li:first-child")}),e.$set=e=>{"selected"in e&&n("selected",o=e.selected)},{selected:o,selectable:i,selectable_1_binding:function(e){B[e?"unshift":"push"](()=>{n("selectable",i=e)})},selectable_1_selected_binding:function(e){n("selected",o=e)}}}class xn extends ue{constructor(e){super(),de(this,e,wn,yn,s,["selected"])}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}}function kn(e){var t,n;return{c(){N(t=_("link"),"rel","stylesheet"),N(t,"href",n="themes/"+e.$properties.theme+".css")},m(e,n){w(e,t,n)},p(e,i){e.$properties&&n!==(n="themes/"+i.$properties.theme+".css")&&N(t,"href",n)},d(e){e&&x(t)}}}function _n(e){var t,n,i,o,c,r=new Ne({props:{items:e.config.items}}),s=e.$properties.theme&&kn(e);return{c(){t=_("div"),r.$$.fragment.c(),i=M(),s&&s.c(),o=O(),N(t,"class","display"),N(t,"style",n=e.$properties.style)},m(e,n){w(e,t,n),se(r,t,null),w(e,i,n),s&&s.m(document.head,null),y(document.head,o),c=!0},p(e,i){var l={};e.config&&(l.items=i.config.items),r.$set(l),c&&!e.$properties||n===(n=i.$properties.style)||N(t,"style",n),i.$properties.theme?s?s.p(e,i):((s=kn(i)).c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i(e){c||(te(r.$$.fragment,e),c=!0)},o(e){ne(r.$$.fragment,e),c=!1},d(e){e&&x(t),le(r),e&&x(i),s&&s.d(e),x(o)}}}function Cn(t,n,i){let o,c=e;t.$$.on_destroy.push(()=>c());let r,{config:s={}}=n;return t.$set=e=>{"config"in e&&i("config",s=e.config)},t.$$.update=(e={config:1})=>{e.config&&(r=ve[s.id],c(),c=l(r,e=>{i("$properties",o=e)}),i("properties",r))},{config:s,properties:r,$properties:o}}class En extends ue{constructor(e){super(),de(this,e,Cn,_n,s,["config"])}get config(){return this.$$.ctx.config}set config(e){this.$set({config:e}),X()}}function Mn(t){var n,i,o=t.error.message+"";return{c(){n=_("p"),i=E(o),L(n,"color","red")},m(e,t){w(e,n,t),y(n,i)},p(e,t){e.promise&&o!==(o=t.error.message+"")&&P(i,o)},i:e,o:e,d(e){e&&x(n)}}}function On(e){var t,n,i=e.config&&Sn(e);return{c(){i&&i.c(),t=O()},m(e,o){i&&i.m(e,o),w(e,t,o),n=!0},p(e,n){n.config?i?(i.p(e,n),te(i,1)):((i=Sn(n)).c(),te(i,1),i.m(t.parentNode,t)):i&&(Z(),ne(i,1,1,()=>{i=null}),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){i&&i.d(e),e&&x(t)}}}function Sn(e){var t,n=new En({props:{config:e.$model}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.$model&&(i.config=t.$model),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function Nn(t){var n;return{c(){(n=_("p")).textContent="...waiting"},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function Pn(e){var t,i,o;let c={ctx:e,current:null,token:null,pending:Nn,then:On,catch:Mn,value:"config",error:"error",blocks:[,,,]};return ie(i=e.promise,c),{c(){t=O(),c.block.c()},m(e,n){w(e,t,n),c.block.m(e,c.anchor=n),c.mount=()=>t.parentNode,c.anchor=t,o=!0},p(t,o){e=o,c.ctx=e,"promise"in t&&i!==(i=e.promise)&&ie(i,c)||c.block.p(t,n(n({},e),c.resolved))},i(e){o||(te(c.block),o=!0)},o(e){for(let e=0;e<3;e+=1){ne(c.blocks[e])}o=!1},d(e){e&&x(t),c.block.d(e),c.token=null,c=null}}}function zn(e,t,n){let i;a(e,ge,e=>{n("$model",i=e)});let{promise:o}=t;return e.$set=e=>{"promise"in e&&n("promise",o=e.promise)},{promise:o,$model:i}}class Ln extends ue{constructor(e){super(),de(this,e,zn,Pn,s,["promise"])}get promise(){return this.$$.ctx.promise}set promise(e){this.$set({promise:e}),X()}}function Dn(t){var n,i,o,c,r;return{c(){n=_("div"),(i=_("h1")).textContent="New Display",o=M(),(c=_("button")).textContent="Blank",N(i,"class","svelte-1v9neyv"),N(n,"class","new-container svelte-1v9neyv"),r=S(c,"click",t.newBlank)},m(e,t){w(e,n,t),y(n,i),y(n,o),y(n,c)},p:e,i:e,o:e,d(e){e&&x(n),r()}}}function jn(e){const t=R();return{newBlank:function(){t("newfile",yt('{"name": "Display", "title": "Untitled"}'))}}}class In extends ue{constructor(e){super(),de(this,e,jn,Dn,s,[])}}function Tn(t){var n,i;return{c(){(n=_("button")).textContent="Open",N(n,"type","button"),i=S(n,"click",t.chooseLocalFile)},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n),i()}}}function An(e){const t=R();return{chooseLocalFile:function(){let e=document.createElement("input");e.type="file",e.accept=".puddy",e.onchange=function(){(function(e){let t=e.files[0],n=new FileReader,i=new Promise((e,t)=>{n.onerror=()=>{n.abort(),t(new DOMException("Could not read local file"))},n.onload=()=>{e(n.result)}});return n.readAsText(t),i})(e).then(function(e){t("localfile",yt(e))})},e.click()}}}class Rn extends ue{constructor(e){super(),de(this,e,An,Tn,s,[])}}function Fn(t){var n,i,o,c,r,s,l,a,d,u,f=new Rn({});return f.$on("localfile",t.localfile_handler),{c(){n=_("div"),(i=_("h1")).textContent="Open Display",o=M(),(c=_("h3")).textContent="Examples",r=M(),(s=_("ul")).innerHTML='<li><a href="?display=examples/exampleA.puddy">Example A</a></li>',l=M(),(a=_("h2")).textContent="Local",d=M(),f.$$.fragment.c(),N(i,"class","svelte-1alxl3l"),L(n,"padding","1em")},m(e,t){w(e,n,t),y(n,i),y(n,o),y(n,c),y(n,r),y(n,s),y(n,l),y(n,a),y(n,d),se(f,n,null),u=!0},p:e,i(e){u||(te(f.$$.fragment,e),u=!0)},o(e){ne(f.$$.fragment,e),u=!1},d(e){e&&x(n),le(f)}}}function qn(e){return{localfile_handler:function(t){F(e,t)}}}class Bn extends ue{constructor(e){super(),de(this,e,qn,Fn,s,[])}}function Un(e){var t,n=new Bn({});return n.$on("localfile",e.localfile_handler),{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function Vn(e){var t,n=new In({});return n.$on("newfile",e.newfile_handler),{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function Wn(e){var t,n,i,o,c=[Vn,Un],r=[];function s(e,t){return t.selected&&"New"===t.selected.textContent?0:1}return t=s(0,e),n=r[t]=c[t](e),{c(){n.c(),i=O()},m(e,n){r[t].m(e,n),w(e,i,n),o=!0},p(e,o){var l=t;(t=s(0,o))!==l&&(Z(),ne(r[l],1,1,()=>{r[l]=null}),ee(),(n=r[t])||(n=r[t]=c[t](o)).c(),te(n,1),n.m(i.parentNode,i))},i(e){o||(te(n),o=!0)},o(e){ne(n),o=!1},d(e){r[t].d(e),e&&x(i)}}}function Hn(e,t,n){let{selected:i={}}=t;return e.$set=e=>{"selected"in e&&n("selected",i=e.selected)},{selected:i,newfile_handler:function(t){F(e,t)},localfile_handler:function(t){F(e,t)}}}class Jn extends ue{constructor(e){super(),de(this,e,Hn,Wn,s,["selected"])}get selected(){return this.$$.ctx.selected}set selected(e){this.$set({selected:e}),X()}}function Gn(t){var n;return document.title=n="Puddysticks "+t.$properties.title,{c:e,m:e,p(e,t){e.$properties&&n!==(n="Puddysticks "+t.$properties.title)&&(document.title=n)},i:e,o:e,d:e}}let Xn="puddy-0";function Yn(t,n,i){let o,c,r=e;return t.$$.on_destroy.push(()=>r()),t.$$.update=(e={id:1})=>{e.id&&(c=ve[Xn],r(),r=l(c,e=>{i("$properties",o=e)}),i("properties",c))},{properties:c,$properties:o}}class Kn extends ue{constructor(e){super(),de(this,e,Yn,Gn,s,[])}}function Qn(e){var t,n;function i(n){e.nodisplaysidebar_selected_binding.call(null,n),t=!0,G(()=>t=!1)}let o={};void 0!==e.noDisplaySelected&&(o.selected=e.noDisplaySelected);var c=new xn({props:o});return B.push(()=>re(c,"selected",i)),{c(){c.$$.fragment.c()},m(e,t){se(c,e,t),n=!0},p(e,n){var i={};!t&&e.noDisplaySelected&&(i.selected=n.noDisplaySelected),c.$set(i)},i(e){n||(te(c.$$.fragment,e),n=!0)},o(e){ne(c.$$.fragment,e),n=!1},d(e){le(c,e)}}}function Zn(e){var t,n=new mn({props:{promise:e.promise}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.promise&&(i.promise=t.promise),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function ei(e){var t,n,i,o,c=[Zn,Qn],r=[];function s(e,t){return t.display?0:1}return n=s(0,e),i=r[n]=c[n](e),{c(){t=_("aside"),i.c(),N(t,"slot","aside"),N(t,"class","svelte-1hp0vd")},m(e,i){w(e,t,i),r[n].m(t,null),o=!0},p(e,o){var l=n;(n=s(0,o))===l?r[n].p(e,o):(Z(),ne(r[l],1,1,()=>{r[l]=null}),ee(),(i=r[n])||(i=r[n]=c[n](o)).c(),te(i,1),i.m(t,null))},i(e){o||(te(i),o=!0)},o(e){ne(i),o=!1},d(e){e&&x(t),r[n].d()}}}function ti(e){var t,n;function i(n){e.nodisplaymain_selected_binding.call(null,n),t=!0,G(()=>t=!1)}let o={};void 0!==e.noDisplaySelected&&(o.selected=e.noDisplaySelected);var c=new Jn({props:o});return B.push(()=>re(c,"selected",i)),c.$on("localfile",e.openLocalFile),c.$on("newfile",e.openNewFile),{c(){c.$$.fragment.c()},m(e,t){se(c,e,t),n=!0},p(e,n){var i={};!t&&e.noDisplaySelected&&(i.selected=n.noDisplaySelected),c.$set(i)},i(e){n||(te(c.$$.fragment,e),n=!0)},o(e){ne(c.$$.fragment,e),n=!1},d(e){le(c,e)}}}function ni(e){var t,n=new Ln({props:{promise:e.promise}});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},p(e,t){var i={};e.promise&&(i.promise=t.promise),n.$set(i)},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function ii(e){var t,n,i,o,c=[ni,ti],r=[];function s(e,t){return t.display?0:1}return n=s(0,e),i=r[n]=c[n](e),{c(){t=_("main"),i.c(),N(t,"slot","main")},m(e,i){w(e,t,i),r[n].m(t,null),o=!0},p(e,o){var l=n;(n=s(0,o))===l?r[n].p(e,o):(Z(),ne(r[l],1,1,()=>{r[l]=null}),ee(),(i=r[n])||(i=r[n]=c[n](o)).c(),te(i,1),i.m(t,null))},i(e){o||(te(i),o=!0)},o(e){ne(i),o=!1},d(e){e&&x(t),r[n].d()}}}function oi(t){var n;return{c(){n=M()},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&x(n)}}}function ci(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ri(e){var t,n,i=e.display&&si();return{c(){i&&i.c(),t=O()},m(e,o){i&&i.m(e,o),w(e,t,o),n=!0},p(e,n){n.display?i?te(i,1):((i=si()).c(),te(i,1),i.m(t.parentNode,t)):i&&(Z(),ne(i,1,1,()=>{i=null}),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){i&&i.d(e),e&&x(t)}}}function si(e){var t,n=new Kn({});return{c(){n.$$.fragment.c()},m(e,i){se(n,e,i),t=!0},i(e){t||(te(n.$$.fragment,e),t=!0)},o(e){ne(n.$$.fragment,e),t=!1},d(e){le(n,e)}}}function li(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function ai(e){var t,i,o,c,r=new Mt({props:{$$slots:{default:[oi],main:[ii],aside:[ei]},$$scope:{ctx:e}}});let s={ctx:e,current:null,token:null,pending:li,then:ri,catch:ci,value:"config",error:"null",blocks:[,,,]};return ie(i=e.promise,s),{c(){r.$$.fragment.c(),t=M(),s.block.c(),o=M(),document.title="Puddysticks"},m(e,n){se(r,e,n),w(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>o.parentNode,s.anchor=o,w(e,o,n),c=!0},p(t,o){e=o;var c={};(t.$$scope||t.display||t.promise||t.noDisplaySelected)&&(c.$$scope={changed:t,ctx:e}),r.$set(c),s.ctx=e,"promise"in t&&i!==(i=e.promise)&&ie(i,s)||s.block.p(t,n(n({},e),s.resolved))},i(e){c||(te(r.$$.fragment,e),te(s.block),c=!0)},o(e){ne(r.$$.fragment,e);for(let e=0;e<3;e+=1){ne(s.blocks[e])}c=!1},d(e){le(r,e),e&&x(t),s.block.d(e),s.token=null,s=null,e&&x(o)}}}function di(e,t,n){me.Panel={constructor:Le,defaults:{style:"",class:"",items:[]},icon:"window-restore.svg"},me.Label={constructor:nt,dataproviders:{Static:{constructor:ct,defaults:{value:"Unlabeled"}},RNG:{constructor:lt,defaults:{min:0,max:10,hz:1,decimals:2,tween:!1}}},defaults:{dataprovider:{name:"Static"},style:"",class:""},icon:"sticky-note.svg"},me.Gauge={constructor:pt,dataproviders:{Static:{constructor:$t,defaults:{value:0,min:0,max:100,labeldecimals:2,tickdecimals:0}},RNG:{constructor:bt,defaults:{min:0,max:10,hz:1,labeldecimals:2,tickdecimals:0,tween:!0}}},defaults:{dataprovider:{name:"Static"},style:"",class:""},icon:"tachometer-alt.svg"},me.Indicator={constructor:Ie,dataproviders:{Static:{constructor:Re,defaults:{value:0}},RNG:{constructor:Xe,defaults:{min:0,max:1,hz:1,tween:!1}}},defaults:{dataprovider:{name:"Static"},style:"",class:"",onIf:function(e){return e.value>0},flash:!0},icon:"lightbulb.svg"};let i,o,c=new URLSearchParams(location.search).get("display");return c&&n("promise",i=async function(e){const t=await fetch(e),n=await t.text();if(t.ok)return yt(n);throw new Error(n)}(c)),{display:c,promise:i,openLocalFile:function(e){n("display",c="localfile"),n("promise",i=new Promise(function(t,n){t(e.detail)}))},openNewFile:function(e){n("display",c="newfile"),n("promise",i=new Promise(function(t,n){t(e.detail)}))},noDisplaySelected:o,nodisplaysidebar_selected_binding:function(e){n("noDisplaySelected",o=e)},nodisplaymain_selected_binding:function(e){n("noDisplaySelected",o=e)}}}return new class extends ue{constructor(e){super(),de(this,e,di,ai,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
